{"mappings":"gfAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,yGCAzD,IAAAC,EAAAJ,EAAA,SCAiBA,EAAA,SAAAK,aAA6C,SAAWL,EAAA,SAAAM,QAA6C,S,yCDS9GC,EAA2BC,EAAAC,QAA3BC,WAAYC,EAAeH,EAAAC,QAAfG,WACdC,EAAW,eAqBjB,SAASC,IACL,IAAMC,GAAmB,EAAAX,EAAAY,yBAAwBH,GAClB,IAA5BE,EAAiBE,OAChBN,EAAWO,UAAUC,OAAO,oBAE5BR,EAAWO,UAAUE,IAAI,mBACzBb,EAAWc,mBAAmB,aAAa,EAAAC,EAAAC,gBAAeR,I,CAzBlED,IAEAU,SAASC,iBAAiB,SAE1B,SAAoCC,GAElC,GADkBA,EAAMC,OAAOC,QAAQ,iBACxB,CACb,IAAMC,EAASH,EAAMC,OAAOC,QAAQ,cAAcE,QAAQC,GACpDC,GAAoB,EAAA5B,EAAAY,yBAAwBH,GAC5CoB,EAAeD,EAAkBE,WACrC,SAAAC,G,OAAQA,EAAKC,MAAQP,C,IAEvBG,EAAkBK,OAAOJ,EAAc,IACvC,EAAA7B,EAAAkC,wBAAuBzB,EAAUmB,GACjCzB,EAAWgC,WAAY,EAAAjB,EAAAC,gBAAeS,GACtClB,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-be2a7c8f699dcefd.js","src/js/template/shopping-list-markup.js","node_modules/@parcel/runtime-js/lib/runtime-ce669e32e7609f53.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"4SWbF\\\":\\\"shopping-list.2663b042.js\\\",\\\"410VS\\\":\\\"icons.e7f82428.svg\\\"}\"));","import {\n  getDataFromLocalStorage,\n  saveDataToLocalStorage,\n} from '../localstorage/local';\nimport spriteSvg from '../../images/icons.svg';\nimport { set } from 'firebase/database';\nimport { shopListMarkup } from './markup';\nimport refs from '../refs/refs';\n\nconst { shopListEl, emptyBinEl } = refs; \nconst BOOK_KEY = 'chosen-books';\n\ndoMarkup();\n\ndocument.addEventListener('click', removeBookFromLocalStorage);\n\nfunction removeBookFromLocalStorage(event) {\n  const deleteBtn = event.target.closest('[data-delete]');\n  if (deleteBtn) {\n    const idBook = event.target.closest('.book-item').dataset.id;\n    const localStorageBooks = getDataFromLocalStorage(BOOK_KEY);\n    const bookToDelete = localStorageBooks.findIndex(\n      book => book._id === idBook\n    );\n    localStorageBooks.splice(bookToDelete, 1);\n    saveDataToLocalStorage(BOOK_KEY, localStorageBooks);\n    shopListEl.innerHTML = shopListMarkup(localStorageBooks);\n    doMarkup();\n  }\n}\n  \nfunction doMarkup() {\n    const localStorageData = getDataFromLocalStorage(BOOK_KEY);\n    if(localStorageData.length === 0) {\n        emptyBinEl.classList.remove('visually-hidden');\n    } else {\n        emptyBinEl.classList.add('visually-hidden');\n        shopListEl.insertAdjacentHTML(\"beforeend\", shopListMarkup(localStorageData));\n    }\n}","module.exports = require('./helpers/bundle-url').getBundleURL('4SWbF') + require('./helpers/bundle-manifest').resolve(\"410VS\");"],"names":["parcelRequire","register","JSON","parse","$44iE8","getBundleURL","resolve","$0be77836aeb7528d$var$shopListEl","$cqmI4","default","shopListEl","$0be77836aeb7528d$var$emptyBinEl","emptyBinEl","$0be77836aeb7528d$var$BOOK_KEY","$0be77836aeb7528d$var$doMarkup","localStorageData","getDataFromLocalStorage","length","classList","remove","add","insertAdjacentHTML","$aI4Bq","shopListMarkup","document","addEventListener","event","target","closest","idBook","dataset","id","localStorageBooks","bookToDelete","findIndex","book","_id","splice","saveDataToLocalStorage","innerHTML"],"version":3,"file":"shopping-list.2663b042.js.map"}